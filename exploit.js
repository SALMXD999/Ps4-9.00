async function run_hax() {
  const progress = (msg) => document.getElementById('status').textContent = msg;

  try {
    progress('جارٍ تشغيل WebKit Exploit...');

    // هنا يكون الكود الفعلي لتشغيل WebKit Exploit
    // (ممكن يكون موجود من قبل أو يتم استدعاؤه من ملف آخر)
    // حالياً ننتظر شوي كأن الاستغلال شغال
    await new Promise(resolve => setTimeout(resolve, 3000)); // انتظار ٣ ثواني

    progress('جارٍ قراءة ملف البايلود من USB...');

    const payloadPath = '/mnt/usb0/stage2.bin'; // المسار المفترض للبايلود داخل USB
    const response = await fetch(payloadPath);

    if (!response.ok) throw new Error('❌ لم يتم العثور على ملف stage2.bin في USB.');

    const payloadBuffer = await response.arrayBuffer();

    progress('جارٍ تنفيذ البايلود...');

    if (typeof kernel === 'undefined' || typeof kernel.exec !== 'function') {
      throw new Error('❌ دالة kernel.exec غير موجودة أو غير معرفة.');
    }

    await kernel.exec(payloadBuffer);

    progress('✅ تم تنفيذ البايلود بنجاح!');
    
  } catch (err) {
    console.error('Error during exploit:', err);
    progress('❌ خطأ: ' + err.message);
  }
}
