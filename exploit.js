
async function run_hax() {
  const progress = (msg) => document.getElementById('status').textContent = msg;

  try {
    progress('🚀 تشغيل WebKit Exploit...');
    await new Promise(resolve => setTimeout(resolve, 3000)); // انتظار الاستغلال

    progress('⬇️ تحميل stage2.bin من USB...');
    const response = await fetch('/mnt/usb0/stage2.bin');

    if (!response.ok) throw new Error('لم يتم العثور على stage2.bin في USB');

    const payloadBuffer = await response.arrayBuffer();

    progress('💥 تنفيذ البايلود...');

    if (typeof kernel === 'undefined' || typeof kernel.exec !== 'function') {
      throw new Error('❌ kernel.exec غير معرف أو غير مدعوم.');
    }

    await kernel.exec(payloadBuffer);

    progress('✅ تم تشغيل البايلود بنجاح!');
  } catch (err) {
    console.error(err);
    progress('❌ خطأ: ' + err.message);
  }
}
