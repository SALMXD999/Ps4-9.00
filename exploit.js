async function run_hax() {
    const progress = (msg) => {
        if (document.getElementById('status')) {
            document.getElementById('status').textContent = msg;
        } else {
            console.log(msg);
        }
    };

    try {
        progress('🚀 جاري تشغيل WebKit Exploit...');
        await new Promise(resolve => setTimeout(resolve, 3000)); // انتظار بسيط تحضيري

        progress('⬇️ جاري تحميل stage2.bin من USB...');
        const response = await fetch('/mnt/usb0/stage2.bin');
        if (!response.ok) throw new Error('❌ لم يتم العثور على stage2.bin في USB');

        const payloadBuffer = await response.arrayBuffer();

        progress('💥 جاري تنفيذ البايلود...');

        if (typeof kernel === 'undefined' || typeof kernel.exec !== 'function') {
            throw new Error('❌ kernel.exec غير موجود.');
        }

        await kernel.exec(payloadBuffer);

        progress('✅ تم تنفيذ البايلود بنجاح!');
    } catch (err) {
        console.error(err);
        progress('❌ خطأ: ' + err.message);
    }
}
